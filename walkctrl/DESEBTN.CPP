/*------------------------------------------------------------------------------ * Virtus WalkThrough_ * Version 1.1.1 * * Copyright _ 1990-1992 by Virtus Corporation * All Rights Reserved * Written by   *				 *				Mark J. Uland * Virtus Corporation * Suite 204 * 117 Edinburgh South * Cary, North Carolina    27511 * (919) 467-9700 *------------------------------------------------------------------------------ * Source File:  * Notes:  * History:  *------------------------------------------------------------------------------ */#include "VTypes.h"#include "DesEBtn.h"#include "CVDefs.h"#include "Cntrl.h"#include "BallHelp.h"#include "ToolDef.h"// MERGE-GOURAUD-PRO-10#include "VDocumnt.h" // MERGE-GOURAUD-PRO-10#include "WlkCntrl.h" // MERGE-GOURAUD-PRO-10#include "WalkThru.h" // MERGE-GOURAUD-PRO-10#include "CvWCntrl.h" // MERGE-GOURAUD-PRO-10void PolyToolButton::cButtonSet()	{	ToolButton::cButtonSet();		defaultButton = 2;	cButton(3);		// MERGE-GOURAUD-PRO rearranged following	AppendButton(bDROPPER);	AppendButton(bZOOMIN);		// MERGE-GOURAUD-PRO¥¥¥	AppendButton(bARROW);			/*	the selector popup		*/	AppendButton(bMEASURE_TOOL);	/*	the utility popup		*/	AppendButton(bHAND);			/*	the hand				*/	AppendButton(bLOCK);			/*	the hand				*/	AppendButton(bREGPOLY_ROOM);	/*	regular polygonal room	*/	AppendButton(bPOLY_ROOM);		/*	polygonal room			*/	AppendButton(bRECT_ROOM);		/*	rectangular room		*/	AppendButton(bCONNECTOR);		/*	connect room			*/	AppendButton(bPLUS_MINUS);		/*	add/remove a corner		*/	AppendButton(bROTATE_ROOM);		/*	positioning tool popup	*/#if !SPECIAL_EDITION         	// merge SE, vrmadness		// GJR 7/4/95	AppendButton(bLIGHT_EDITOR);	/*	light editor			*/#else // SPECIAL_EDITION			// merge SE, vrmadness		// GJR 7/4/95	AppendButton(bNULL);	/*	light editor			*/#endif //SPECIAL_EDITION		// merge SE, vrmadness		// GJR 7/4/95	AppendButton(bSURFACE_EDITOR);	/*	surface editor			*/	AppendButton(bTUMBLE_EDITOR);	/*	tumble editor			*/		SetState(toggleButton = 2,ONSTATE);// { DAS-VR-HELP 9/30/93#if VWT	SetHelp(0,TXTB_COLORLIFT);		// MERGE-GOURAUD-PRO-2 changed these help messages	SetHelp(1,TXTB_ZOOMIN);	SetHelp(2,TXTB_SELECTOBJ);	SetHelp(3,TXTB_TAPEMEASURE);	//SetHelp(4,TXTB_CRRECTOBJ);	//SetHelp(5,TXTB_CONNECT);	SetHelp(6,TXTB_CRNSIDEDOBJ);	SetHelp(7,TXTB_CRIRREGOBJ);	SetHelp(8,TXTB_CRRECTOBJ);	SetHelp(9,TXTB_CONNECT);	SetHelp(10,TXTB_ADDREMHANDLE);	SetHelp(11,TXTB_ROTATEOBJ);#if !SPECIAL_EDITION         	// merge SE, vrmadness		// GJR 7/4/95	SetHelp(12,TXTB_LIGHTEDITOR);#endif //!SPECIAL_EDITION		// merge SE, vrmadness		// GJR 7/4/95	SetHelp(13,TXTB_SURFEDITOR);	SetHelp(14,TXTB_TUMBLEEDITOR);#endif// } DAS-VR-HELP 9/30/93	}void PosnToolButton::cButtonSet()	{	ToolButton::cButtonSet();		cButton(3);		// MERGE-GOURAUD-PRO AppendButton(bROTATE_ROOM);	AppendButton(bSCALE_ROOM);	AppendButton(bSKEW_TOOL);		SetState(0,ONSTATE);// DAS-VR-HELP 9/30/93#if VWT		// MERGE-GOURAUD-PRO SetHelp(0,TXTB_ROTATEOBJ);	SetHelp(0,TXTB_SCALEOBJ);	SetHelp(1,TXTB_SKEWOBJ);#endif// } DAS-VR-HELP 9/30/93	}	// MERGE-GOURAUD-PRO-10 [[[void PolyToolButton::MouseDown(int item,long modifiers)	{    	#if MACINTOSH		ToolButton::MouseDown(item, modifiers);		#if VPRO		if (GetState(3))		{		VCGrafPort savePort;		VGrafDevice saveDevice;		VGetPort(&savePort,&saveDevice);		((CAVWalkController*)(((WalkDocumentStub*)(controller->document))->walkController))->ShowPallette(toolWCoord, SHOW);		VSetPort(savePort,saveDevice);		}		#endif // VPRO		#elif WINDOWS	//if macintosh		//JAM 21OCT94 when tape measure caused coordinate window to		//appead, tool pallate wasn't updating.  this order works		//better for windows.		#if VPRO		if ((item == 3))		{		VCGrafPort savePort;		VGrafDevice saveDevice;		VGetPort(&savePort,&saveDevice);		((CAVWalkController*)(((WalkDocumentStub*)(controller->document))->walkController))->ShowPallette(toolWCoord, SHOW);		VSetPort(savePort,saveDevice);		}		#endif //VPRO		ToolButton::MouseDown(item, modifiers);		#endif //elif windows	}	// MERGE-GOURAUD-PRO-10 ]]]void PolyModButton::cButtonSet()	{		ModButton::cButtonSet();		AppendButton(bEXTRUSION);	AppendButton(bCONVERGE_UP);	AppendButton(bCONVERGE_DOWN);		polyExtrudeButton = new(PolyExtrudeButton);	polyExtrudeButton->cButtonSet();	SetHeir(3,polyExtrudeButton);	polyConvergeUpButton = new(PolyConvergeUpButton);	polyConvergeUpButton->cButtonSet();	SetHeir(4,polyConvergeUpButton);	polyConvergeDownButton = new(PolyConvergeDownButton);	polyConvergeDownButton->cButtonSet();	SetHeir(5,polyConvergeDownButton);		SetState(0,ONSTATE);	SetState(3,ONSTATE);// { DAS-VR-HELP 9/30/93#if VWT		SetHelp(0,TXTB_OPAQUEMOD);	SetHelp(1,TXTB_TRANSLUCENTMOD);	SetHelp(2,TXTB_TRANSPARENTMOD);		SetHelp(3,TXTB_STRAIGHT);/* DIFFERENT BALLOON HELP */	SetHelp(4,TXTB_INFLCONVUP);	SetHelp(5,TXTB_INFLCONVDOWN);#endif// } DAS-VR-HELP 9/30/93	}// jca 12APR94 we must explicitly delete the parts of the PolyModButton,// since it is much more complex than your average V_Button.  We leave// the deleting of the PolyModButton, like the deleting of the V_Button// to the place that is calling this destructor.voidPolyModButton::dButton(void)	{	polyExtrudeButton->dButton();	polyConvergeUpButton->dButton();	polyConvergeDownButton->dButton();	// V_Buttons are arrays, and have already been deleted through dButton.	// zero out the buttons, though, just to be safe	polyExtrudeButton = NULL;	polyConvergeUpButton = NULL;	polyConvergeDownButton = NULL;	V_Button::dButton();	}void PolyModButton::SetController(Controller	*ctrl)	{	ModButton::SetController(ctrl);	polyExtrudeButton->SetController(ctrl);	polyConvergeUpButton->SetController(ctrl);	polyConvergeDownButton->SetController(ctrl);	}	void PolyExtrudeButton::cButtonSet()	{	ToolButton::cButtonSet();		cButton(3);		AppendButton(bEXTRUSION);	AppendButton(bCONVERGE_DUAL);	AppendButton(bELLIPSE_DUAL);	SetState(0,ONSTATE);// { DAS-VR-HELP 9/30/93#if VWT	SetHelp(0,TXTB_STRAIGHT);/* DIFFERENT BALLOON HELP */	SetHelp(1,TXTB_INFLDCONVERGE);	SetHelp(2,TXTB_INFLDELLIPSE);#endif // } DAS-VR-HELP 9/30/93	}void PolyConvergeUpButton::cButtonSet()	{	ToolButton::cButtonSet();		cButton(2);		AppendButton(bCONVERGE_UP);	AppendButton(bELLIPSE_UP);// { DAS-VR-HELP 9/30/93#if VWT	SetHelp(0,TXTB_INFLCONVUP);	SetHelp(1,TXTB_INFLELLPUP);#endif // } DAS-VR-HELP 9/30/93	}void PolyConvergeDownButton::cButtonSet()	{	ToolButton::cButtonSet();		cButton(2);		AppendButton(bCONVERGE_DOWN);	AppendButton(bELLIPSE_DOWN);// { DAS-VR-HELP 9/30/93#if VWT	SetHelp(0,TXTB_INFLCONVDOWN);	SetHelp(1,TXTB_INFLELLPDOWN);#endif // } DAS-VR-HELP 9/30/93	}// MERGE-GOURAUD [[[void GouraudModButton::cButtonSet()	{		cButton(3);	controller = NULL;	#if !SPECIAL_EDITION         	// merge SE, vrmadness		// GJR 7/4/95	AppendButton(bFLAT_SHADE);	AppendButton(bGOURAUD_SHADE);	SetState(0,ONSTATE);	SetState(1,OFFSTATE);// { DAS-VR-HELP 9/30/93#if VWT		SetHelp(0,TXTB_FLATSHADEMOD);	SetHelp(1,TXTB_GOURAUDSHADEMOD);#endif// } DAS-VR-HELP 9/30/93#else  //SPECIAL_EDITION		// merge SE, vrmadness		// GJR 7/4/95	AppendButton(bNULL);	AppendButton(bNULL);#endif //!SPECIAL_EDITION		// merge SE, vrmadness		// GJR 7/4/95	}void GouraudModButton::MouseDown(int item,long modifiers)	{	int		c,i,state;			c=(unsigned char)GetChar(item);	if(doubleClick&modifiers) state = LOCKSTATE; else state = ONSTATE;					controller->ControlMessage(c,modifiers,state);	thePane->SetPane();	for(i=0;i<2;i++) 	{ if(i==item) 		SetState(i,ONSTATE); 		else  		SetState(i,OFFSTATE); }		}void GouraudModButton::Reset(int item)	{	int		c;	int 	i;		c=(unsigned char)GetChar(item);			controller->ControlMessage(c,0L,ONSTATE);		for(i=0;i<2;i++) { if(i==item) SetState(i,ONSTATE); else  SetState(i,OFFSTATE); }		}// MERGE-GOURAUD ]]]